PA8255 EQU 0FF28H
PB8255 EQU 0FF29H
PC8255 EQU 0FF2AH
CON8255 EQU 0FF2BH
SETCLK EQU 01H
CLRCLK EQU 00H
SETPW EQU 03H
CLRPW EQU 02H
ADD_W EQU 0A0H
ADD_R EQU 0A1H
ASSUME CS:CODE
CODE	SEGMENT	PUBLIC
	ORG	1000H
START:	MOV DX,CON8255
	MOV AL,82H
	OUT DX,AL
	MOV AL,CLRPW
	OUT DX,AL
START1: MOV DX,PB8255
	IN AL,DX
	TEST AL,01H
	JNZ START1
	MOV DX,CON8255
	MOV AL,SETPW
	OUT DX,AL
	MOV BH,7FH	;ADDR WIRTE 07FH 
	MOV AH,0ABH	;DATA WIRTE 0ABH 
	CALL WRITE_BYTE
	CALL DELAY10
	XOR AH,AH
	MOV BH,7FH
	CALL READ_BYTE
	NOP
	; BREAK POINT 
	JMP START
WRITE_BYTE: CALL BEGIN0
	MOV BL,ADD_W
	CALL WR_BYTE
	MOV BL,BH
	CALL WR_BYTE
	MOV BL,AH
	CALL WR_BYTE
	CALL STOP0
	RET
READ_BYTE: CALL BEGIN0
	MOV BL,ADD_w
	CALL WR_BYTE
	CALL BEGIN0
	MOV BL,ADD_R
	MOV DX,CON8255
	MOV AL,92H
	OUT DX,AL
	MOV AL,SETPW
	OUT DX,AL
	CALL RD_BYTE
	CALL STOP0
	RET
BEGIN0:	MOV DX,CON8255
	MOV AL,CLRCLK
	OUT DX,AL
	MOV DX,PA8255
	MOV AL,01H
	OUT DX,AL
	MOV DX,CON8255
	MOV AL,SETCLK
	OUT DX,AL
	MOV DX,PA8255
	MOV AL,00H
	OUT DX,AL
	MOV DX,CON8255
	MOV AL, CLRCLK
	OUT DX,AL
	RET
STOP0:	MOV DX,CON8255
	MOV AL,CLRCLK
	OUT DX,AL
	MOV DX,PA8255
	MOV AL,00H
	OUT DX,AL
	MOV DX,CON8255
	MOV AL,SETCLK
	OUT DX,AL
	MOV DX,PA8255
	MOV AL,01H
	OUT DX,AL
	MOV DX,CON8255
	MOV AL,CLRCLK
	OUT DX,AL
	MOV DX,PA8255
	MOV AL,00H
	OUT DX,AL
	RET
WR_BYTE: MOV CX,0008H
	MOV DX,CON8255
	MOV AL,CLRCLK
	OUT DX,AL
WBYTE1:	RCL BL,1
	MOV AL,00H
	RCL AL,1
	MOV DX,PA8255
	OUT DX,AL
	MOV DX,CON8255
	MOV AL,CLRCLK
	OUT DX,AL
	LOOP WBYTE1
	MOV DX,CON8255
	MOV AL,SETCLK
	OUT DX,AL
	MOV CX,0005H
WAIT0:	NOP
	LOOP WAIT0
	MOV DX,CON8255
	MOV AL,CLRCLK
	OUT DX,AL
	RET
RD_BYTE: MOV AH,00H
	MOV CX,0008H
RBYTE1: MOV DX,PA8255
	IN AL,DX
	RCR AL,1
	MOV DX,CON8255
	MOV AL,SETCLK
	OUT DX,AL
	RCL AH,1
	MOV DX,CON8255
	MOV AL,CLRCLK
	OUT DX,AL
	LOOP RBYTE1
	RET
DELAY10: MOV CX,1388H
DELAY1:	NOP
	LOOP DELAY1
	RET
CODE ENDS
	END START